!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.mango=n.exports}}(this,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){return document.querySelectorAll(c)}function t(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,o=t.width,r=t.height,d=e.cloneNode(),a=window.pageXOffset||0;return d.style.position="absolute",d.style.top=n+v+"px",d.style.left=i+a+"px",d.style.width=o+"px",d.style.height=r+"px",d}function o(){var e=document.createElement("div");return e.classList.add("mango-overlay"),e}function r(e){if(e.preventDefault(),e.target){d(e.target)}else d(origin).out(150)}function d(e){function n(){function t(){m||(m=!0,document.body.classList.remove("mango--open"),i.style.transform="none",i.removeEventListener("click",n()),o=function t(){e.style.visibility="visible",i.remove(),f.remove(),i.classList.remove("mango-image--open"),m=!1,i.removeEventListener("transitionend",t)},i.addEventListener("transitionend",o),document.removeEventListener("keydown",r),document.removeEventListener("scroll",d))}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a>0?setTimeout(t,a):t()}if(e){var i=t(e);document.body.appendChild(f),document.body.appendChild(i),requestAnimationFrame(function(){document.body.classList.add("mango--open")}),e.style.visibility="hidden",i.classList.add("mango-image--open");var o=function e(){m=!0,i.addEventListener("click",function(){m=!1,n()}),window.addEventListener("resize",function(){m=!1,n(20)}),f.addEventListener("click",function(){m=!1,n()}),i.removeEventListener("transitionend",e)},r=function(){[27,37,39].includes(event.keyCode)&&(m=!1,n())},d=function(){var e=window.pageYOffset||0;Math.abs(v-e)>50&&(m=!1,n(150))};i.addEventListener("transitionend",o),document.addEventListener("keydown",r),document.addEventListener("scroll",d),i.style.transform=a(e)}}function a(e){var t={width:window.innerWidth,height:window.innerHeight,left:0,top:0,right:0,bottom:0},n=t.width-100,i=t.height-100,o=e,r=o.naturalWidth,d=void 0===r?n:r,a=o.naturalHeight,s=void 0===a?i:a,c=o.getBoundingClientRect(),l=c.top,u=c.left,f=c.width,v=c.height,m=Math.min(d,n)/f,p=Math.min(s,i)/v,g=Math.min(m,p)||1;return"scale("+g+") translate3d("+((n-f)/2-u+50+t.left)/g+"px,\n       "+((i-v)/2-l+50+t.top)/g+"px, 0)"}function s(e){Array.from(e).forEach(function(e){e.classList.add("mango-image"),e.addEventListener("click",function(e){r(e)})})}var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-mango]",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l=n({},i,l);var u=e(),f=o(),v=window.pageYOffset||0,m=!0;return s(u)};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i={};e.exports=t.default});